# 活动

## 活动阶段

[活动开始时间|投票截止时间|比赛开始时间|比赛结束|活动结束时间]

### 时间顺序约束
- 活动开始时间 < 投票截止时间 ≤ 比赛开始时间 < 比赛结束时间 ≤ 活动结束时间

### 窗口定义
- 活动窗口：[活动开始时间-活动结束时间]
- 投票窗口：[活动开始时间-投票截止时间]
- 比赛窗口：自比赛开始时间起，若 matchEnd=false 则持续进行；若 matchEnd=true 则比赛已结束
- 奖励领取窗口：当 matchEnd=true 时开启，持续至活动结束时间


### 活动状态
- 草稿：未发布，时间可编辑
- 待开始：当前时间 < 活动开始时间
- 投票中：活动开始时间 ≤ 当前时间 < 投票截止时间
- 赛前：投票截止时间 ≤ 当前时间 < 比赛开始时间
- 比赛中：比赛开始时间 ≤ 当前时间 < 比赛结束时间
- 公示中：比赛结束时间 ≤ 当前时间 < 活动结束时间
- 已结束：当前时间 ≥ 活动结束时间

### 状态转移规则
- 随时间自动推进，禁止回退
- 已发布后，禁止修改已开始或已结束阶段的时间
- 未开始阶段允许延后，但不得提前或打破时间顺序约束
- 奖励领取仅允许在“奖励领取窗口”内进行

### 边界约定
- 所有时间使用同一时区，单位精确到分钟
- 窗口采用左闭右开，活动结束为右闭
- 若投票截止与比赛开始为同一时刻，视为无缝衔接
- 奖励领取窗口属于“公示中”阶段的子窗口；matchEnd 为布尔结束标记，无需具体时间戳

